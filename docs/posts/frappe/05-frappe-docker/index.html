<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />

<link rel="stylesheet" href="/application.6a5cdf7499f781bae02ed80dbc345e1b18e8cf6108d1808a7d1fbbf08e5c006e.css" integrity="sha256-alzfdJn3gbrgLtgNvDReGxjoz2EI0YCKfR&#43;78I5cAG4=" />







<meta property="og:url" content="https://exiahuang.github.io/posts/frappe/05-frappe-docker/">
  <meta property="og:site_name" content="Exia.Huang">
  <meta property="og:title" content="Exia.Huang">
  <meta property="og:description" content="如果你是使用 Frappe 官方 Docker 部署的环境，可以在 容器内部 运行 Python 代码。以下是正确的执行步骤：
方法 1：进入容器并执行 Python 代码 步骤 列出运行中的 Docker 容器（找到 Frappe 站点的容器）：
docker ps 你会看到类似：
CONTAINER ID IMAGE COMMAND STATUS PORTS NAMESabc123 frappe/erpnext-worker &#34;docker-entrypoint.s…&#34; Up 10 hours frappe_workerdef456 frappe/erpnext-nginx &#34;nginx -g &#39;daemon of…&#34; Up 10 hours 0.0.0.0:8080-&gt;8080/tcp frappe_nginxghi789 frappe/erpnext-python &#34;docker-entrypoint.s…&#34; Up 10 hours frappe_backend 进入 frappe_backend 容器（通常是 frappe/erpnext-python）：
docker exec -it frappe_backend bash docker exec -it frappe_docker-backend-1 bash （将 frappe_backend 替换为你的 CONTAINER ID 或 NAMES）">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">

    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Exia.Huang">
  <meta name="twitter:description" content="如果你是使用 Frappe 官方 Docker 部署的环境，可以在 容器内部 运行 Python 代码。以下是正确的执行步骤：
方法 1：进入容器并执行 Python 代码 步骤 列出运行中的 Docker 容器（找到 Frappe 站点的容器）：
docker ps 你会看到类似：
CONTAINER ID IMAGE COMMAND STATUS PORTS NAMESabc123 frappe/erpnext-worker &#34;docker-entrypoint.s…&#34; Up 10 hours frappe_workerdef456 frappe/erpnext-nginx &#34;nginx -g &#39;daemon of…&#34; Up 10 hours 0.0.0.0:8080-&gt;8080/tcp frappe_nginxghi789 frappe/erpnext-python &#34;docker-entrypoint.s…&#34; Up 10 hours frappe_backend 进入 frappe_backend 容器（通常是 frappe/erpnext-python）：
docker exec -it frappe_backend bash docker exec -it frappe_docker-backend-1 bash （将 frappe_backend 替换为你的 CONTAINER ID 或 NAMES）">

    
    
<meta name="description" content="" />



    

    
        
            
            
                
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-02B7V57RLL"></script>
      <script>
        var doNotTrack = false;
        if ( null ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-02B7V57RLL');
        }
      </script>
            

            
            

            
            

            
            

            

            

            
        
    





    <script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">
     let theme = localStorage.getItem('theme-scheme') || localStorage.getItem('darkmode:color-scheme') || 'light'
if (theme === 'system') {
  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    theme = 'dark'
  } else {
    theme = 'light'
  }
}
document.documentElement.setAttribute('data-theme', theme)

    </script>
    
  </head>

  <body class="type-posts kind-page" data-bs-spy="scroll" data-bs-target="#TableOfContents" data-bs-offset="80">
    <div class="container-fluid bg-secondary wrapper">
      
      
    


































  




  


<nav class="navbar navbar-expand-xl top-navbar shadow " id="top-navbar">
  <div class="container">
    
    <button class="navbar-toggler navbar-light" id="sidebar-toggler" type="button">
      <i data-feather="sidebar"></i>
    </button>
    
    <a class="navbar-brand" href="/">
      Exia.Huang</a>
    <button
      class="navbar-toggler navbar-light"
      id="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#top-nav-items"
      aria-label="menu"
    >
      <i data-feather="menu"></i>
    </button>

    <div class="collapse navbar-collapse dynamic-navbar" id="top-nav-items">
      <ul class="nav navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="/#home">Home</a>
        </li>
        
          
          
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#about">About</a>
                </li>
              
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#skills">Skills</a>
                </li>
              
            
            
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#projects">Projects</a>
                </li>
              
            
            
            
            
            
            
          
        
        
        
        
        
        
        
      </ul>
    </div>
  </div>
  
  
  
  
</nav>



      
      
  <section class="sidebar-section" id="sidebar-section">
    <div class="sidebar-holder">
      <div class="sidebar" id="sidebar">
        <form class="mx-auto" method="get" action="/search">
          <input type="text" name="keyword" value="" placeholder="Search" data-search="" id="search-box" />
        </form>
        <div class="sidebar-tree">
          <ul class="tree" id="tree">
            <li id="list-heading"><a href="/posts/" data-filter="all">Posts</a></li>
            <div class="subtree">
                
  
  
  
  
  
    
    <li><a class=" list-link" href="/posts/introduction/" title="Introduction">Introduction</a></li>
  


            </div>
          </ul>
        </div>
      </div>
    </div>
  </section>


      
      
<section class="content-section" id="content-section">
  <div class="content">
    <div class="container p-0 read-area">
      
      <div class="hero-area col-sm-12" id="hero-area" style='background-image: url(/images/default-hero.jpg);'>
      </div>

      
      <div class="page-content">
        
        <div class="author-profile ms-auto align-self-lg-center">
          <img class="rounded-circle" src='/images/exia001_hu_a184b916d2edc497.jpg' alt="Author Image">
          <h5 class="author-name">Exia Huang</h5>
          <p class="text-muted">Monday, January 1, 1</p>
        </div>
        

        <div class="title">
          <h1></h1>
        </div>

        

        
        <div class="post-content" id="post-content">
          <p>如果你是使用 <strong>Frappe 官方 Docker</strong> 部署的环境，可以在 <strong>容器内部</strong> 运行 Python 代码。以下是正确的执行步骤：</p>
<hr>
<h2 id="方法-1进入容器并执行-python-代码"><strong>方法 1：进入容器并执行 Python 代码</strong></h2>
<h3 id="步骤"><strong>步骤</strong></h3>
<ol>
<li>
<p><strong>列出运行中的 Docker 容器</strong>（找到 Frappe 站点的容器）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker ps
</span></span></code></pre></div><p>你会看到类似：</p>
<pre tabindex="0"><code>CONTAINER ID   IMAGE                        COMMAND                  STATUS         PORTS                     NAMES
abc123         frappe/erpnext-worker        &#34;docker-entrypoint.s…&#34;   Up 10 hours                               frappe_worker
def456         frappe/erpnext-nginx         &#34;nginx -g &#39;daemon of…&#34;   Up 10 hours   0.0.0.0:8080-&gt;8080/tcp    frappe_nginx
ghi789         frappe/erpnext-python        &#34;docker-entrypoint.s…&#34;   Up 10 hours                               frappe_backend
</code></pre></li>
<li>
<p><strong>进入 <code>frappe_backend</code> 容器</strong>（通常是 <code>frappe/erpnext-python</code>）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker exec -it frappe_backend bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker exec -it frappe_docker-backend-1 bash
</span></span></code></pre></div><p>（将 <code>frappe_backend</code> 替换为你的 <code>CONTAINER ID</code> 或 <code>NAMES</code>）</p>
</li>
<li>
<p><strong>进入 Frappe Shell（Python 交互模式）</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bench list-apps
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bench --site your-site console
</span></span><span style="display:flex;"><span>bench --site frontend console
</span></span></code></pre></div><ul>
<li><code>your-site</code> 替换为你的站点名称，比如 <code>site1.local</code>。</li>
<li>运行后，你会进入 <code>frappe@your-site</code> 交互模式。</li>
</ul>
</li>
<li>
<p><strong>粘贴 Python 代码并执行</strong> 在 <code>frappe@your-site</code> 提示符下，复制粘贴你的 <strong>方法 1 代码</strong> 并回车执行。</p>
</li>
</ol>
<hr>
<h2 id="方法-2创建-python-脚本并执行"><strong>方法 2：创建 Python 脚本并执行</strong></h2>
<p>如果你不想手动输入代码，可以把代码写到 Python 文件中并执行。</p>
<h3 id="步骤-1"><strong>步骤</strong></h3>
<ol>
<li>
<p><strong>进入 <code>frappe_backend</code> 容器</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker exec -it frappe_backend bash
</span></span></code></pre></div></li>
<li>
<p><strong>进入你的 Frappe 站点目录</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd /home/frappe/frappe-bench
</span></span></code></pre></div></li>
<li>
<p><strong>创建 Python 脚本</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>nano add_fields.py
</span></span></code></pre></div><ul>
<li>在 <code>nano</code> 编辑器中粘贴 <strong>方法 1 代码</strong>，然后 <code>Ctrl + X</code> 退出并按 <code>Y</code> 保存。</li>
</ul>
</li>
<li>
<p><strong>执行 Python 脚本</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bench --site your-site execute add_fields.add_custom_fields
</span></span></code></pre></div><p>（<code>your-site</code> 替换为你的站点名称）</p>
</li>
</ol>
<hr>
<h2 id="方法-3使用-frappe-rest-api远程执行"><strong>方法 3：使用 Frappe REST API（远程执行）</strong></h2>
<p>如果你的 Docker 运行在远程服务器上，而你不想 SSH 进入容器，你可以通过 <strong>REST API</strong> 远程创建字段：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST https://your-site.com/api/resource/Custom%20Field <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    -H <span style="color:#e6db74">&#34;Authorization: token your-api-key:your-api-secret&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;dt&#34;: &#34;YourDocType&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;fieldname&#34;: &#34;new_field&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;label&#34;: &#34;New Field&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;fieldtype&#34;: &#34;Data&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    }&#39;</span>
</span></span></code></pre></div><p>（需要在 Frappe 用户设置中 <strong>生成 API 密钥</strong>）</p>
<hr>
<h3 id="总结"><strong>总结</strong></h3>
<table>
  <thead>
      <tr>
          <th>方式</th>
          <th>适用场景</th>
          <th>执行方式</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>方法 1：Frappe Shell</strong></td>
          <td>手动执行小段代码</td>
          <td><code>bench --site your-site console</code></td>
      </tr>
      <tr>
          <td><strong>方法 2：Python 脚本</strong></td>
          <td>需要批量创建字段</td>
          <td><code>bench --site your-site execute add_fields.add_custom_fields</code></td>
      </tr>
      <tr>
          <td><strong>方法 3：REST API</strong></td>
          <td>远程调用，无需进入容器</td>
          <td>发送 <code>curl</code> 或 Python <code>requests</code> 请求</td>
      </tr>
  </tbody>
</table>
<p>如果你想<strong>快速测试代码</strong>，用 <strong>方法 1</strong>；如果你要<strong>长期使用</strong>，可以用 <strong>方法 2</strong>。</p>
<p>你更倾向哪种方式？需要我帮你调整代码吗？😊</p>

        </div>

        
        <div class="row ps-3 pe-3">
        
          <div class="col-md-6 share-buttons">
          
          </div>

        
        
        </div>



      
      <hr />
        







  





  
  


<div class="row next-prev-navigator">
  
  
</div>

      <hr />

      
      

      
      

      </div>
    </div>
  </div>
  
  <a id="scroll-to-top" class="btn" type="button" data-bs-toggle="tooltip" data-bs-placement="left" title="Scroll to top">
    <i class="fas fa-chevron-circle-up"></i>
  </a>
</section>


      
      
  <section class="toc-section" id="toc-section">
    
    <div class="toc-holder">
      <h5 class="text-center ps-3">Table of Contents</h5>
      <hr>
      <div class="toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#方法-1进入容器并执行-python-代码"><strong>方法 1：进入容器并执行 Python 代码</strong></a>
      <ul>
        <li><a href="#步骤"><strong>步骤</strong></a></li>
      </ul>
    </li>
    <li><a href="#方法-2创建-python-脚本并执行"><strong>方法 2：创建 Python 脚本并执行</strong></a>
      <ul>
        <li><a href="#步骤-1"><strong>步骤</strong></a></li>
      </ul>
    </li>
    <li><a href="#方法-3使用-frappe-rest-api远程执行"><strong>方法 3：使用 Frappe REST API（远程执行）</strong></a>
      <ul>
        <li><a href="#总结"><strong>总结</strong></a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    </div>
    
  </section>

    </div>

    
    












  
  
    
  

  
  
    
  

  
  

  
  
    
    
      
    
  


  
  
  

  
  
  

  
  
  
    
  
  

  
  
  

  <footer id="footer" class="container-fluid text-center align-content-center footer pb-2">
    <div class="container pt-5">
      <div class="row text-start">
        
        <div class="col-md-4 col-sm-12">
          <h5>Navigation</h5>
          
          <ul>
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://exiahuang.github.io/#about">About</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://exiahuang.github.io/#skills">Skills</a>
                </li>
              
              
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://exiahuang.github.io/#projects">Projects</a>
                </li>
              
              
              
              
              
              
            
              
            
          </ul>
          
        </div>
        
        
        <div class="col-md-4 col-sm-12">
          <h5>Contact me:</h5>
          <ul>
            
              
                <li><a href=mailto:exia.dev@outlook.com target="_blank" rel="noopener">
                  <span><i class="fas fa-envelope"></i></span> <span>exia.dev@outlook.com</span>
                </a></li>
              
            
              
                <li><a href=https://github.com/exiahuang target="_blank" rel="noopener">
                  <span><i class="fab fa-github"></i></span> <span>exiahuang</span>
                </a></li>
              
            
          </ul>
        </div>
        
        
        
      </div>
    </div>
    
    
    <hr />
    <div class="container">
      <div class="row text-start">
        <div class="col-md-4">
          <a id="theme" href="https://github.com/hugo-toha/toha" target="_blank" rel="noopener">
            <img src="/images/theme-logo_hu_b3360284c55cf72d.png" alt="Toha Theme Logo">
            Toha
          </a>
        </div>
        <div class="col-md-4 text-center">© 2020 Copyright.</div>
        <div class="col-md-4 text-end">
          <a id="hugo" href="https://gohugo.io/" target="_blank" rel="noopener">Powered by
          <img
            src="/images/hugo-logo.svg"
            alt="Hugo Logo"
            height="18"
          />
          </a>
        </div>
      </div>
    </div>
    
  </footer>


    <script src="/application.a25d0a72b149f87926690ec805b6bec8f78980aaf07d94b7e9adad6a0684c757.js" integrity="sha256-ol0KcrFJ&#43;HkmaQ7IBba&#43;yPeJgKrwfZS36a2tagaEx1c=" defer></script>


    
     

    
</body>
</html>
